# Command history configuration
if [ -z "$HISTFILE" ]; then
    HISTFILE=$HOME/.zsh_history
fi

# History size settings
HISTSIZE=10000
SAVEHIST=10000

# History behavior options
setopt append_history           # Append to history file
setopt extended_history         # Save timestamp and duration
setopt hist_expire_dups_first   # Expire duplicates first
setopt hist_ignore_dups         # Ignore consecutive duplicates
setopt hist_ignore_space        # Ignore commands starting with space
setopt hist_verify              # Verify history expansion before execution
setopt inc_append_history       # Append immediately to history file
setopt share_history            # Share history between sessions
setopt hist_reduce_blanks       # Remove superfluous blanks
setopt hist_ignore_all_dups     # Remove all duplicates

# History search settings
setopt hist_find_no_dups        # Don't display duplicates when searching
setopt hist_save_no_dups        # Don't save duplicates

# History timestamp format
HIST_STAMPS="yyyy-mm-dd"

# History search functions
case $HIST_STAMPS in
  "mm/dd/yyyy") alias history='fc -fl 1' ;;
  "dd.mm.yyyy") alias history='fc -El 1' ;;
  "yyyy-mm-dd") alias history='fc -il 1' ;;
  *) alias history='fc -l 1' ;;
esac
